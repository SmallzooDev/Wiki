---
title: dp μ™Ένμ› λ¬Έμ  π¤¨
summary: 
date: 2025-05-25 10:55:39 +0900
lastmod: 2025-05-25 11:18:39 +0900
tags: 
categories: 
description: 
showToc: true
tocOpen: true
---

## Solution
- [rust soulution](https://github.com/SmallzooDev/coding_interview_rust/blob/main/src/bin/b_2098.rs)


## Memo
- λ»ν’€μ—λ‹¤! π¥²
- λΉ„νΈλ§μ¤ν‚Ήμ„ μ¨μ„ μ“°λ” ν’€μ΄κ°€ μλ”κ±Έ μ•μ•λ”λ°, κ·Έκ±Έ λ– μ¬λ¦¬μ§€ λ»ν•κ³  μ‹κ°„μ„ λ³΄λ‚΄λ‹¤κ°€ μ§€μ³μ„ λ‹¤λ¥Έ μ½”λ“λ¥Ό μ°Έκ³ ν–λ‹¤.
```rust
fn tsp(n: usize, grid: &[Vec<usize>]) -> usize {
    // dp[mask][i] = μ§€κΈ μ„μΉκ°€ i μ΄λ©°, maskλ΅ ν‘ν„λ λ„μ‹λ¥Ό λ°©λ¬Έν–μ„λ• μµμ† λΉ„μ©
    let mut dp = vec![vec![usize::MAX; n]; 1 << n];

    // 0001 0λ² λ„μ‹λ§ λ°©λ¬Έν• λΉ„μ© 0
    dp[1][0] = 0;

    // λ¨λ“  λ°©λ¬Έ κ²½λ΅μ—μ„
    for mask in 1..(1 << n) {
        // ν•΄λ‹Ή λ°λ³µλ¬Έμ μ‹μ‘ μ§€μ μ„ μ°Ύλ”λ‹¤
        for i in 0..n {
            // mask & (1 << i) == 0 : λ°©λ¬Έν•μ§€ μ•μ€ λ„μ‹λ¥Ό μ²΄ν¬ν•λ‹¤. μ¦‰ λ°©λ¬Έν•μ§€ μ•μ€ λ„μ‹μ—μ„ μ¶λ°ν•  μ μ—†λ‹¤.
            // dp[mask][i] == usize::MAX μ•„μ§ λ„λ‹¬ν•μ§€ λ»ν• κ²½λ΅
            if (mask & (1 << i)) == 0 || dp[mask][i] == usize::MAX {
                continue;
            }

            // μ§€κΈκΈ°μ¤€μ λ°©λ¬Έκ²½λ΅(mask)μ™€ μ‹μ‘μ (i) λ‹¤μ μ§€μ (j) μµμ† λΉ„μ©μ„ κµ¬ν•κ³  memo
            for j in 0..n {
                if (mask & (1 << j)) != 0 || grid[i][j] == 0 {
                    continue;
                }

                let next_mask = mask | (1 << j);
                dp[next_mask][j] = dp[next_mask][j].min(dp[mask][i] + grid[i][j]);
            }
        }
    }

    let full_mask = (1 << n) - 1;
    let mut result = usize::MAX;

    for i in 1..n {
        if dp[full_mask][i] != usize::MAX && grid[i][0] > 0 {
            if let Some(cost) = dp[full_mask][i].checked_add(grid[i][0]) {
                result = result.min(cost);
            }
        }
    }

    result
}
```

solutionμ„ ν’€μ–΄μ„ μ„¤λ…ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤
- dp μ •μ
	- `dp[λΉ„νΈλ΅ ν‘ν„ν• μ§€κΈκΉμ§€μ κ²½λ΅][μ§€κΈμ„μΉ] = λΉ„μ©`
	- μ¦‰ `dp[0011][0]`, `dp[0011][1]` μ€ κ°κ° 
		- 0λ², 1λ² λ…Έλ“λ¥Ό λ°©λ¬Έν• μƒνƒμ—μ„ μ§€κΈ 0λ²μ— μλ”λ° ν•„μ”ν• λΉ„μ© 
		- 0λ², 1λ² λ…Έλ“λ¥Ό λ°©λ¬Έν• μƒνƒμ—μ„ μ§€κΈ 1λ²μ— μλ”λ° ν•„μ”ν• λΉ„μ© 

- κΈ°μ € μ‚¬λ΅€
	- `dp[0001][0] = 0` : 0λ²μ‹μ‘ μ§€κΈ 0λ²μ— μλ” λΉ„μ©μ€ 0

- validation 1
	- iλ” λ‚΄κ°€ μ§€κΈ μ„μλ” λ…Έλ“
	- μ•„λ μ²λΌ μ•„μ§ λ°©λ¬Έν•μ§€ μ•μ€ κ²½λ΅μ— μ„μλ”κ²½μ°, μ•„μ§ κµ¬ν•΄μ§„ κ²½λ΅κ°€ μ•„λ‹κ²½μ°λ” ν¨μ¤
```rust
for i in 0..n {
	if (mask & (1 << i)) == 0 || dp[mask][i] == usize::MAX {
		continue;
	}
```
- validation 2
	- jλ” λ‚΄κ°€ μ§€κΈ κ° λ…Έλ“
	- μ•„λμ²λΌ jκ°€ μ΄λ―Έ λ°©λ¬Έν•λ…Έλ“μ΄κ±°λ‚, λΉ„μ©μ΄ 0μΈκ²½μ°(μ§€κΈλ…Έλ“λ§ 0μ΄λ‹¤)λ” ν¨μ¤
```rust
for j in 0..n {
	if (mask & (1 << j)) != 0 || grid[i][j] == 0 {
		continue;
	}
```
- dpκ°’ κ³„μ‚°
	- μ΄λ―Έ κ³„μ‚°λ κ°’κ³Ό μ§€κΈ μ—¬κΈ°μ„ κ°€λ”κ°’μ¤‘μ— μµμ†κ°’
```rust
 dp[next_mask][j] = dp[next_mask][j].min(dp[mask][i] + grid[i][j]);
```
- μ •λ‹µκµ¬ν•κΈ°
	- `dp[ν’€λ§μ¤ν¬λκ°’ μ¦‰ λ¨λ“  κ²½λ΅ λ°©λ¬Έν• κ²½μ°μ—μ„][μ§€κΈμ„μλ”μ„μΉ]` + λ³µκ·€λΉ„μ©

```bash
==== ν…μ¤νΈ μΌ€μ΄μ¤ : 4κ° λ„μ‹ ====
=== TSP μ‹μ‘ ===
λ„μ‹ μ: 4
κ±°λ¦¬ grid:
[0, 10, 15, 20]
[5, 0, 9, 10]
[6, 13, 0, 12]
[8, 8, 9, 0]

μ΄κΈ° μƒνƒ: dp[1][0] = 0 (0λ² λ„μ‹μ—μ„ μ‹μ‘)

=== mask = 1 (binary: 0001) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 
  ν„μ¬ μ„μΉ 0: λΉ„μ© = 0
    0β†’1: ν„μ¬λΉ„μ©(0) + μ΄λ™λΉ„μ©(10) = 10 (λ‹¤μ mask: 0011)
      dp[0011][1] μ—…λ°μ΄νΈ: MAX β†’ 10
        (λ°©λ¬Έλ„μ‹: 0 1 )
    0β†’2: ν„μ¬λΉ„μ©(0) + μ΄λ™λΉ„μ©(15) = 15 (λ‹¤μ mask: 0101)
      dp[0101][2] μ—…λ°μ΄νΈ: MAX β†’ 15
        (λ°©λ¬Έλ„μ‹: 0 2 )
    0β†’3: ν„μ¬λΉ„μ©(0) + μ΄λ™λΉ„μ©(20) = 20 (λ‹¤μ mask: 1001)
      dp[1001][3] μ—…λ°μ΄νΈ: MAX β†’ 20
        (λ°©λ¬Έλ„μ‹: 0 3 )

=== mask = 2 (binary: 0010) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 1 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 3 (binary: 0011) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 1 
  ν„μ¬ μ„μΉ 1: λΉ„μ© = 10
    1β†’2: ν„μ¬λΉ„μ©(10) + μ΄λ™λΉ„μ©(9) = 19 (λ‹¤μ mask: 0111)
      dp[0111][2] μ—…λ°μ΄νΈ: MAX β†’ 19
        (λ°©λ¬Έλ„μ‹: 0 1 2 )
    1β†’3: ν„μ¬λΉ„μ©(10) + μ΄λ™λΉ„μ©(10) = 20 (λ‹¤μ mask: 1011)
      dp[1011][3] μ—…λ°μ΄νΈ: MAX β†’ 20
        (λ°©λ¬Έλ„μ‹: 0 1 3 )

=== mask = 4 (binary: 0100) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 2 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 5 (binary: 0101) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 2 
  ν„μ¬ μ„μΉ 2: λΉ„μ© = 15
    2β†’1: ν„μ¬λΉ„μ©(15) + μ΄λ™λΉ„μ©(13) = 28 (λ‹¤μ mask: 0111)
      dp[0111][1] μ—…λ°μ΄νΈ: MAX β†’ 28
        (λ°©λ¬Έλ„μ‹: 0 1 2 )
    2β†’3: ν„μ¬λΉ„μ©(15) + μ΄λ™λΉ„μ©(12) = 27 (λ‹¤μ mask: 1101)
      dp[1101][3] μ—…λ°μ΄νΈ: MAX β†’ 27
        (λ°©λ¬Έλ„μ‹: 0 2 3 )

=== mask = 6 (binary: 0110) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 1 2 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 7 (binary: 0111) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 1 2 
  ν„μ¬ μ„μΉ 1: λΉ„μ© = 28
    1β†’3: ν„μ¬λΉ„μ©(28) + μ΄λ™λΉ„μ©(10) = 38 (λ‹¤μ mask: 1111)
      dp[1111][3] μ—…λ°μ΄νΈ: MAX β†’ 38
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )
  ν„μ¬ μ„μΉ 2: λΉ„μ© = 19
    2β†’3: ν„μ¬λΉ„μ©(19) + μ΄λ™λΉ„μ©(12) = 31 (λ‹¤μ mask: 1111)
      dp[1111][3] μ—…λ°μ΄νΈ: 38 β†’ 31
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )

=== mask = 8 (binary: 1000) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 3 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 9 (binary: 1001) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 3 
  ν„μ¬ μ„μΉ 3: λΉ„μ© = 20
    3β†’1: ν„μ¬λΉ„μ©(20) + μ΄λ™λΉ„μ©(8) = 28 (λ‹¤μ mask: 1011)
      dp[1011][1] μ—…λ°μ΄νΈ: MAX β†’ 28
        (λ°©λ¬Έλ„μ‹: 0 1 3 )
    3β†’2: ν„μ¬λΉ„μ©(20) + μ΄λ™λΉ„μ©(9) = 29 (λ‹¤μ mask: 1101)
      dp[1101][2] μ—…λ°μ΄νΈ: MAX β†’ 29
        (λ°©λ¬Έλ„μ‹: 0 2 3 )

=== mask = 10 (binary: 1010) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 1 3 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 11 (binary: 1011) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 1 3 
  ν„μ¬ μ„μΉ 1: λΉ„μ© = 28
    1β†’2: ν„μ¬λΉ„μ©(28) + μ΄λ™λΉ„μ©(9) = 37 (λ‹¤μ mask: 1111)
      dp[1111][2] μ—…λ°μ΄νΈ: MAX β†’ 37
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )
  ν„μ¬ μ„μΉ 3: λΉ„μ© = 20
    3β†’2: ν„μ¬λΉ„μ©(20) + μ΄λ™λΉ„μ©(9) = 29 (λ‹¤μ mask: 1111)
      dp[1111][2] μ—…λ°μ΄νΈ: 37 β†’ 29
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )

=== mask = 12 (binary: 1100) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 2 3 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 13 (binary: 1101) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 2 3 
  ν„μ¬ μ„μΉ 2: λΉ„μ© = 29
    2β†’1: ν„μ¬λΉ„μ©(29) + μ΄λ™λΉ„μ©(13) = 42 (λ‹¤μ mask: 1111)
      dp[1111][1] μ—…λ°μ΄νΈ: MAX β†’ 42
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )
  ν„μ¬ μ„μΉ 3: λΉ„μ© = 27
    3β†’1: ν„μ¬λΉ„μ©(27) + μ΄λ™λΉ„μ©(8) = 35 (λ‹¤μ mask: 1111)
      dp[1111][1] μ—…λ°μ΄νΈ: 42 β†’ 35
        (λ°©λ¬Έλ„μ‹: 0 1 2 3 )

=== mask = 14 (binary: 1110) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 1 2 3 
  (μ΄ maskμ—μ„ μ ν¨ν• μƒνƒ μ—†μ)

=== mask = 15 (binary: 1111) ===
λ°©λ¬Έν• λ„μ‹λ“¤: 0 1 2 3 
  ν„μ¬ μ„μΉ 1: λΉ„μ© = 35
  ν„μ¬ μ„μΉ 2: λΉ„μ© = 29
  ν„μ¬ μ„μΉ 3: λΉ„μ© = 31

=== μµμΆ… κ²°κ³Ό κ³„μ‚° ===
λ¨λ“  λ„μ‹ λ°©λ¬Έ μ™„λ£ mask: 15 (binary: 1111)
λ„μ‹ 1μ—μ„ μ‹μ‘μ μΌλ΅: 35(λ°©λ¬ΈλΉ„μ©) + 5(λ³µκ·€λΉ„μ©) = 40
λ„μ‹ 2μ—μ„ μ‹μ‘μ μΌλ΅: 29(λ°©λ¬ΈλΉ„μ©) + 6(λ³µκ·€λΉ„μ©) = 35
λ„μ‹ 3μ—μ„ μ‹μ‘μ μΌλ΅: 31(λ°©λ¬ΈλΉ„μ©) + 8(λ³µκ·€λΉ„μ©) = 39
μµμΆ… κ²°κ³Ό: 35

```
