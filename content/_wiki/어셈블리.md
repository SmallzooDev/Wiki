---
title: 어셈블리
summary: 어셈블리 디버깅을 위한 간단한 cheat sheet
date: 2024-05-03 15:48:55 +0900
lastmod: 2024-05-03 15:48:55 +0900
tags: 
categories: 
description: 
showToc: true
tocOpen: true
---

## 1. 어셈블러

- 어셈블러는 어셈블리어를 기계어로 변환해주는 프로그램이다.

- Section 구분이 있다.
    - .data : 데이터를 저장하는 공간
      - 변수의 선언 및 사용
      - 초기화 된 데이터를 저장하는 공간
    - .text : 코드를 저장하는 공간
    - .bss : 초기화되지 않은 데이터를 저장하는 공간

```cpp
#include <iostream>
using namespace std;

char str[] = {'1','2','3','4','5'}; // .data 영역에 저장
int main() {
    char str2[] = {'1','2','3','4','5'}; // stack 영역에 저장
    cout << str << endl;
    cout << str2 << endl;
    return 0;
}
```

```shell
12345
12345�%
```

- `str`은 초기화된 데이터이기 때문에 .data 영역에 저장된다.
- `str2`는 stack 영역에 저장된 문자 배열이고 우연히 escape null을 찾을때까지 출력한다.

8비트 : 1바이트
16비트 : 2바이트: 1워드
32비트 : 4바이트: 1더블워드
64비트 : 8바이트: 1쿼드워드

- 레지스터의 크기는 일반적으로 64비트 운영체제에서 64비트 레지스터를 사용한다.(8바이트)
- 종류는 총 16개이다.
    - 64비트 레지스터 : RAX, RBX, RCX, RDX, RSI, RDI, RBP, RSP, R8, R9, R10, R11, R12, R13, R14, R15
    - 32비트 레지스터 : EAX, EBX, ECX, EDX, ESI, EDI, EBP, ESP
    - 16비트 레지스터 : AX, BX, CX, DX, SI, DI, BP, SP
    - 8비트 레지스터 : AL, BL, CL, DL, SIL, DIL, BPL, SPL

### 1.1. 어셈블리어 명령어

- 어셈블리어 명령어는 기계어로 변환되는 명령어이다.
- 어셈블리어 명령어는 기계어 명령어와 1:1 대응된다.

- `mov` : 레지스터에 값을 저장하는 명령어
- `add` : 레지스터에 값을 더하는 명령어
- `sub` : 레지스터에 값을 빼는 명령어
- `mul` : 레지스터에 값을 곱하는 명령어
- `div` : 레지스터에 값을 나누는 명령어
- `inc` : 레지스터에 값을 1 증가시키는 명령어
- `dec` : 레지스터에 값을 1 감소시키는 명령어
- `cmp` : 레지스터에 값을 비교하는 명령어
- `jmp` : 레지스터에 값을 비교하는 명령어
- `je` : 레지스터에 값을 비교하는 명령어
- `jne` : 레지스터에 값을 비교하는 명령어
- `jg` : 레지스터에 값을 비교하는 명령어
- `jge` : 레지스터에 값을 비교하는 명령어
- `jl` : 레지스터에 값을 비교하는 명령어
- `jle` : 레지스터에 값을 비교하는 명령어
- `call` : 함수를 호출하는 명령어
- `ret` : 함수를 종료하는 명령어
- `push` : 스택에 값을 저장하는 명령어
- `pop` : 스택에 값을 꺼내는 명령어
- `lea` : 주소를 저장하는 명령어
- `and` : 논리곱을 하는 명령어
- `or` : 논리합을 하는 명령어
- `xor` : 배타적 논리합을 하는 명령어
- `not` : 논리부정을 하는 명령어
- `shl` : 왼쪽 시프트를 하는 명령어
- `shr` : 오른쪽 시프트를 하는 명령어
- `nop` : 아무것도 하지 않는 명령어


db: Define Byte - 바이트 단위의 데이터를 정의합니다.
dw: Define Word - 워드(2바이트) 단위의 데이터를 정의합니다.
dd: Define Doubleword - 더블워드(4바이트) 단위의 데이터를 정의합니다.
dq: Define Quadword - 쿼드워드(8바이트) 단위의 데이터를 정의합니다.
